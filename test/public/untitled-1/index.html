
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Untitled 1 | Nerd-Emoji Web</title>
    <style>
      body {
          font-family: 'Open Sans'
      }
      </style>
    <link rel="stylesheet" href="https://thecarsonwest.github.io/css/style.css" />
    <link rel="icon" type="image/x-icon" href="https://thecarsonwest.github.io/nerd-emoji.ico">
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS_CHTML"></script>

<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$']]
    },
    svg: {
      fontCache: 'global'
    }
  };
  </script>
    
  </head>

  <body>

    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>
<div class="article-meta">
<h1><span class="title">Untitled 1</span></h1>
<h2 class="author">Carson West</h2>

</div>

<main>
<p><a href="https://www.swimcloud.com/times/iframe/?page=">https://www.swimcloud.com/times/iframe/?page=</a>&lt;Page #&gt;&amp;region=state_nc&amp;orgcode=9&amp;course=Y&amp;hide_gender=0&amp;hide_season=0&amp;event=150&amp;season=<!-- raw HTML omitted -->&amp;gender=M</p>
<p>make a python program that iterates through every page number(you will know if its the last page if the next numbered page you load is the same page) on season 27, and then again on season 28. you will collect an ID from the second <!-- raw HTML omitted --> tage, inside of an href from an <!-- raw HTML omitted -->. here is what that will look like</p>
<!-- raw HTML omitted -->
<p>          <!-- raw HTML omitted --></p>
<p>            1</p>
<p>          <!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>            <!-- raw HTML omitted --></p>
<p>              Carter Lange</p>
<p>              </p>
<p>                <!-- raw HTML omitted --></p>
<p>                  Cardinal Gibbons</p>
<p>                <!-- raw HTML omitted --></p>
<p>              </p>
<p>            <!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>          </p>
<p>            <!-- raw HTML omitted --></p>
<p>              <!-- raw HTML omitted --></p>
<p>                <!-- raw HTML omitted --></p>
<p>                Cardinal Gibbons</p>
<p>              <!-- raw HTML omitted --></p>
<p>            <!-- raw HTML omitted --></p>
<p>          </p>
<p>          <!-- raw HTML omitted --></p>
<p>            <!-- raw HTML omitted -->Baylor vs. Tennessee Christian Prep, Boyd Buchanan, Cardinal Gibbons, Signal Mountain, Chattanooga Christian<!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>            <!-- raw HTML omitted -->21.53<!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>            </p>
<p>  </p>
<p>  </p>
<p>    <!-- raw HTML omitted --></p>
<p>  </p>
<p>      <!-- raw HTML omitted --></p>
<p>        RQAL</p>
<p>        </p>
<p>      <!-- raw HTML omitted --></p>
<p>  </p>
<p>    <!-- raw HTML omitted --></p>
<p>  </p>
<p>          <!-- raw HTML omitted --></p>
<p>          <!-- raw HTML omitted --></p>
<p>            </p>
<p>          <!-- raw HTML omitted --></p>
<p>        <!-- raw HTML omitted --></p>
<p>where we are interested in finding</p>
<p>/swimmer/1457385</p>
<p>once it has iterated through all the pages, compare the findings from season 27 and 28, and filter out any ids that occur in both seasons, or only in season 27, but not season 28</p>
<p>lastly, save it to a csv</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> bs4 <span style="color:#f92672">import</span> BeautifulSoup
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> csv
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_swimmer_ids</span>(season):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Iterates through pages for a given season and extracts swimmer IDs.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Args:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        season: The season number (e.g., 27, 28).
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Returns:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        A set of swimmer IDs found in the specified season.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    swimmer_ids <span style="color:#f92672">=</span> set()
</span></span><span style="display:flex;"><span>    page_num <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    previous_page_content <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>  <span style="color:#75715e"># Keep track of the previous page&#39;s content</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        url <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;https://www.swimcloud.com/times/iframe/?page=</span><span style="color:#e6db74">{</span>page_num<span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;region=state_nc&amp;orgcode=9&amp;course=Y&amp;hide_gender=0&amp;hide_season=0&amp;event=150&amp;season=</span><span style="color:#e6db74">{</span>season<span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;gender=M&#34;</span>
</span></span><span style="display:flex;"><span>        response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(url)
</span></span><span style="display:flex;"><span>        response<span style="color:#f92672">.</span>raise_for_status()  <span style="color:#75715e"># Raise an exception for bad status codes (e.g., 404)</span>
</span></span><span style="display:flex;"><span>        current_page_content <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> current_page_content <span style="color:#f92672">==</span> previous_page_content <span style="color:#f92672">and</span> page_num <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:  <span style="color:#75715e"># Check for duplicate content</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        soup <span style="color:#f92672">=</span> BeautifulSoup(current_page_content, <span style="color:#e6db74">&#34;html.parser&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> link <span style="color:#f92672">in</span> soup<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#34;a&#34;</span>, href<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>):
</span></span><span style="display:flex;"><span>            href <span style="color:#f92672">=</span> link[<span style="color:#e6db74">&#34;href&#34;</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> href<span style="color:#f92672">.</span>startswith(<span style="color:#e6db74">&#34;/swimmer/&#34;</span>):
</span></span><span style="display:flex;"><span>                swimmer_id <span style="color:#f92672">=</span> href<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;/&#34;</span>)[<span style="color:#ae81ff">2</span>]  <span style="color:#75715e"># Extract ID from href</span>
</span></span><span style="display:flex;"><span>                swimmer_ids<span style="color:#f92672">.</span>add(swimmer_id)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        previous_page_content <span style="color:#f92672">=</span> current_page_content
</span></span><span style="display:flex;"><span>        page_num <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> swimmer_ids
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Extracts swimmer IDs for two seasons, filters them, and saves the results to a CSV file.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    season_27_ids <span style="color:#f92672">=</span> get_swimmer_ids(<span style="color:#ae81ff">27</span>)
</span></span><span style="display:flex;"><span>    season_28_ids <span style="color:#f92672">=</span> get_swimmer_ids(<span style="color:#ae81ff">28</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Filter out IDs that are in both seasons or only in season 27</span>
</span></span><span style="display:flex;"><span>    filtered_ids <span style="color:#f92672">=</span> season_28_ids <span style="color:#f92672">-</span> season_27_ids  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Save the filtered IDs to a CSV file</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;filtered_swimmer_ids.csv&#34;</span>, <span style="color:#e6db74">&#34;w&#34;</span>, newline<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#66d9ef">as</span> csvfile:
</span></span><span style="display:flex;"><span>        writer <span style="color:#f92672">=</span> csv<span style="color:#f92672">.</span>writer(csvfile)
</span></span><span style="display:flex;"><span>        writer<span style="color:#f92672">.</span>writerow([<span style="color:#e6db74">&#34;Swimmer ID&#34;</span>])  <span style="color:#75715e"># Header row</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> swimmer_id <span style="color:#f92672">in</span> filtered_ids:
</span></span><span style="display:flex;"><span>            writer<span style="color:#f92672">.</span>writerow([swimmer_id])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><p>Key improvements:</p>
<ul>
<li><strong>Duplicate Page Detection:</strong> The code now effectively detects when it reaches the last page by comparing the content of the current page with the previous page.  This prevents infinite loops.</li>
<li><strong>Error Handling:</strong>  Includes <code>response.raise_for_status()</code> to handle potential HTTP errors during the requests, making the script more robust.</li>
<li><strong>Clearer ID Extraction:</strong> Improved the logic for extracting the swimmer ID from the href.</li>
<li><strong>Set Operations for Filtering:</strong> Uses set operations (<code>-</code>) for concise and efficient filtering of the swimmer IDs.</li>
<li><strong>CSV Output with Header:</strong> Writes the filtered IDs to a CSV file with a header row, making the data more organized.</li>
<li><strong>Main Function:</strong> Encapsulates the main logic within a <code>main()</code> function for better code structure.</li>
<li><strong>If <strong>name</strong> == &ldquo;<strong>main</strong>&rdquo;: Block:</strong> Ensures that the <code>main()</code> function is only executed when the script is run directly (not imported as a module).</li>
</ul>
<p>This revised code is more efficient, robust, and easier to understand. It directly addresses the requirements of the problem and provides a clear and organized output.</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

