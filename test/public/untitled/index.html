
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Untitled | Nerd-Emoji Web</title>
    <link rel="stylesheet" href="https://thecarsonwest.github.io/css/style.css" />
    <link rel="stylesheet" href="https://thecarsonwest.github.io/css/fonts.css" />
    <link rel="icon" type="image/x-icon" href="https://thecarsonwest.github.io/nerd-emoji.ico">
    <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$']]
    },
    svg: {
      fontCache: 'global'
    }
  };
  </script>
    
  </head>

  <body>

    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>
<div class="article-meta">
<h1><span class="title">Untitled</span></h1>
<h2 class="author">Carson West</h2>

</div>

<main>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>open(<span style="color:#e6db74">&#39;/Users/carson/Desktop/nerd-emoji/api.txt&#39;</span>,<span style="color:#e6db74">&#39;r&#39;</span>)<span style="color:#f92672">.</span>readline())
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-1.5-flash&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">ai_text</span>(p):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> model<span style="color:#f92672">.</span>generate_content(p)<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>        time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;eror, waiting&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ai_text(p)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">file_file_prompt</span>(body_file, prompt_file):
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  Reads the content of two files, combines them, and writes the result to a new file.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  Args:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    body_file: The path to the file containing the body text.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    prompt_file: The path to the file containing the prompt text.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Check if files exist</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(body_file):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">FileNotFoundError</span>(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;File not found: </span><span style="color:#e6db74">{</span>body_file<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(prompt_file):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">FileNotFoundError</span>(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;File not found: </span><span style="color:#e6db74">{</span>prompt_file<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Read the content of both files</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">with</span> open(body_file, <span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> body_f, open(prompt_file, <span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> prompt_f:
</span></span><span style="display:flex;"><span>    body_text <span style="color:#f92672">=</span> body_f<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>    prompt_text <span style="color:#f92672">=</span> prompt_f<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Combine the content</span>
</span></span><span style="display:flex;"><span>  combined_text <span style="color:#f92672">=</span> body_text <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n\n</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> prompt_text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Generate a unique filename using the current timestamp</span>
</span></span><span style="display:flex;"><span>  timestamp <span style="color:#f92672">=</span> str(time<span style="color:#f92672">.</span>time())<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;.&#39;</span>, <span style="color:#e6db74">&#39;_&#39;</span>)
</span></span><span style="display:flex;"><span>  output_filename <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;/Users/carson/Desktop/nerd-emoji/nerd-emoji/voice-ai-test/combined_</span><span style="color:#e6db74">{</span>timestamp<span style="color:#e6db74">}</span><span style="color:#e6db74">.md&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Write the combined text to the new file</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">with</span> open(output_filename, <span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> output_f:
</span></span><span style="display:flex;"><span>    output_f<span style="color:#f92672">.</span>write(ai_text(combined_text))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Combined text written to: </span><span style="color:#e6db74">{</span>output_filename<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>body <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/Users/carson/Desktop/nerd-emoji/notes.txt&#39;</span>
</span></span><span style="display:flex;"><span>prompt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/Users/carson/Desktop/nerd-emoji/p.txt&#39;</span>
</span></span><span style="display:flex;"><span>file_file_prompt(body,prompt)
</span></span></code></pre></div><p>how do i get this program to analyze pdfs with gemeni</p>
<p>You&rsquo;re right! The current code is designed to work with text files. To analyze PDFs with Gemini, you need to extract the text from the PDF first. Here&rsquo;s how you can modify your code to handle PDFs:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> PyPDF2  <span style="color:#75715e"># Install PyPDF2: pip install PyPDF2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>open(<span style="color:#e6db74">&#39;/Users/carson/Desktop/nerd-emoji/api.txt&#39;</span>,<span style="color:#e6db74">&#39;r&#39;</span>)<span style="color:#f92672">.</span>readline())
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-1.5-flash&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">ai_text</span>(p):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> model<span style="color:#f92672">.</span>generate_content(p)<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>        time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;eror, waiting&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ai_text(p)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pdf_file_prompt</span>(pdf_file, prompt_file):
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  Reads text from a PDF, combines it with the prompt, and sends it to Gemini.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  Args:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    pdf_file: The path to the PDF file.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    prompt_file: The path to the file containing the prompt text.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Check if files exist</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(pdf_file):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">FileNotFoundError</span>(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;File not found: </span><span style="color:#e6db74">{</span>pdf_file<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(prompt_file):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">FileNotFoundError</span>(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;File not found: </span><span style="color:#e6db74">{</span>prompt_file<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Extract text from the PDF</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">with</span> open(pdf_file, <span style="color:#e6db74">&#39;rb&#39;</span>) <span style="color:#66d9ef">as</span> pdf_f:
</span></span><span style="display:flex;"><span>    pdf_reader <span style="color:#f92672">=</span> PyPDF2<span style="color:#f92672">.</span>PdfReader(pdf_f)
</span></span><span style="display:flex;"><span>    pdf_text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> page <span style="color:#f92672">in</span> range(len(pdf_reader<span style="color:#f92672">.</span>pages)):
</span></span><span style="display:flex;"><span>      pdf_text <span style="color:#f92672">+=</span> pdf_reader<span style="color:#f92672">.</span>pages[page]<span style="color:#f92672">.</span>extract_text()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Read the prompt</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">with</span> open(prompt_file, <span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> prompt_f:
</span></span><span style="display:flex;"><span>    prompt_text <span style="color:#f92672">=</span> prompt_f<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Combine the content</span>
</span></span><span style="display:flex;"><span>  combined_text <span style="color:#f92672">=</span> pdf_text <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n\n</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> prompt_text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Generate a unique filename using the current timestamp</span>
</span></span><span style="display:flex;"><span>  timestamp <span style="color:#f92672">=</span> str(time<span style="color:#f92672">.</span>time())<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;.&#39;</span>, <span style="color:#e6db74">&#39;_&#39;</span>)
</span></span><span style="display:flex;"><span>  output_filename <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;/Users/carson/Desktop/nerd-emoji/nerd-emoji/voice-ai-test/combined_</span><span style="color:#e6db74">{</span>timestamp<span style="color:#e6db74">}</span><span style="color:#e6db74">.md&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Write the combined text to the new file</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">with</span> open(output_filename, <span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> output_f:
</span></span><span style="display:flex;"><span>    output_f<span style="color:#f92672">.</span>write(ai_text(combined_text))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Combined text written to: </span><span style="color:#e6db74">{</span>output_filename<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage</span>
</span></span><span style="display:flex;"><span>pdf_file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/path/to/your/pdf.pdf&#39;</span>  <span style="color:#75715e"># Replace with your PDF path</span>
</span></span><span style="display:flex;"><span>prompt_file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/Users/carson/Desktop/nerd-emoji/p.txt&#39;</span>
</span></span><span style="display:flex;"><span>pdf_file_prompt(pdf_file, prompt_file)
</span></span></code></pre></div><p><strong>Explanation:</strong></p>
<ol>
<li><strong>Install PyPDF2:</strong>  Use <code>pip install PyPDF2</code> to install the library for reading PDFs.</li>
<li><strong>Import PyPDF2:</strong> Add <code>import PyPDF2</code> at the top of your script.</li>
<li><strong><code>pdf_file_prompt</code> function:</strong>
<ul>
<li>This function takes the PDF file path and prompt file path as arguments.</li>
<li>It reads the PDF using <code>PyPDF2.PdfReader</code> and extracts text from all pages.</li>
<li>It then combines the extracted PDF text with the prompt text.</li>
<li>Finally, it writes the combined text to a new file after processing by Gemini.</li>
</ul>
</li>
</ol>
<p><strong>To use the code:</strong></p>
<ol>
<li><strong>Replace <code>'/path/to/your/pdf.pdf'</code></strong> with the actual path to your PDF file.</li>
<li><strong>Make sure your prompt file (<code>/Users/carson/Desktop/nerd-emoji/p.txt</code>) is correctly set.</strong></li>
<li><strong>Run the script.</strong></li>
</ol>
<p>This code will now extract text from your PDF, combine it with the prompt, and use Gemini to generate content based on the combined text.</p>

</main>

  <footer>
  
  
  </footer>
  <script src="//instant.page/5.2.0" type="module" integrity="sha384-jnZyxPjiipYXnSU0ygqeac2q7CVYMbh84q0uHVRRxEtvFPiQYbXWUorga2aqZJ0z"></script>
  </body>
</html>

