
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Async Generators | Nerd-Emoji Web</title>
    <style>
      body {
          font-family: 'Open Sans'
      }
      </style>
    <link rel="stylesheet" href="https://thecarsonwest.github.io/css/style.css" />
    <link rel="icon" type="image/x-icon" href="https://thecarsonwest.github.io/nerd-emoji.ico">
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$']]
        },
        svg: {
          fontCache: 'global'
        }
      };
      </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS_CHTML"></script>


    
  </head>

  <body>

    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>
<div class="article-meta">
<h1><span class="title">Async Generators</span></h1>
<h2 class="author">Carson West</h2>

</div>

<main>
<h1 id="generatorsgenerators"><a href="./../generators/">Generators</a></h1>
<h1 id="async-generatorsasync-generators"><a href="./../async-generators/">Async Generators</a></h1>
<p>Async generators are a powerful feature in Python that allows you to create asynchronous iterators.  They are similar to regular generators, but they use the <code>async</code> and <code>await</code> keywords to handle asynchronous operations. This allows you to yield values asynchronously without blocking the main thread.</p>
<p>Key differences from regular generators:</p>
<ul>
<li><strong><code>async def</code>:</strong> Async generators are defined using <code>async def</code> instead of <code>def</code>.</li>
<li><strong><code>await</code>:</strong>  They can use <code>await</code> within the generator function to pause execution while waiting for an asynchronous operation to complete.</li>
<li><strong><code>yield</code>:</strong>  The <code>yield</code> keyword is used to produce values asynchronously.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> asyncio
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">async_generator</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">await</span> asyncio<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">1</span>)  <span style="color:#75715e"># Simulate an asynchronous operation</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">for</span> value <span style="color:#f92672">in</span> async_generator():
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Received: </span><span style="color:#e6db74">{</span>value<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>asyncio<span style="color:#f92672">.</span>run(main())
</span></span></code></pre></div><p><strong>Important Considerations:</strong></p>
<ul>
<li><strong><code>async for</code>:</strong>  You must use <code>async for</code> to iterate over an async generator.</li>
<li><strong><a href="./../error-handling/">Error Handling</a>:</strong>  Similar to regular generators, you need to handle potential exceptions within the async generator using <code>try...except</code> blocks.</li>
<li><a href="./../asyncio/">Asyncio</a>  This is heavily reliant on the <code>asyncio</code> library.  Understanding <code>asyncio</code> is crucial for effectively using async generators.</li>
<li><a href="./../coroutine-explained/">Coroutine Explained</a>  Async generators are coroutines themselves.  Understanding coroutines is essential.</li>
</ul>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Streaming large datasets asynchronously.</li>
<li>Handling asynchronous I/O operations efficiently (e.g., network requests).</li>
<li>Building complex asynchronous pipelines.</li>
</ul>
<p><strong>Further Exploration:</strong></p>
<ul>
<li>Research the <code>asynq</code> library for more advanced async programming techniques.</li>
<li>Explore the use of async generators with libraries like <code>aiohttp</code> for network programming.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Example with error handling:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> asyncio
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">async_generator_with_error_handling</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#34;Something went wrong!&#34;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">await</span> asyncio<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> i
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">ValueError</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Caught an exception: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#75715e"># Yield a special value to signal an error</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main_with_error_handling</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">for</span> value <span style="color:#f92672">in</span> async_generator_with_error_handling():
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Received: </span><span style="color:#e6db74">{</span>value<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>asyncio<span style="color:#f92672">.</span>run(main_with_error_handling())
</span></span></code></pre></div>
</main>

  <footer>
  
  
  </footer>
  </body>
</html>

